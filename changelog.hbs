# About this Release

Initial Release of the Rust rewrite of dlang-prs.

Available Downloads:

- Command Line (CLI Program): `prs-rs-cli`
- C Bindings: `C-Library-*`
- NuGet (C#): [prs_rs.Net.Sys](https://www.nuget.org/packages/prs_rs.Net.Sys)

## Version 2.0.2

This release contains a fix for a pointer arithmetic overflow (undefined behaviour).

```
let offset = read_byte(source) as isize | -0x100; // negative
let src_addr = dest_local.add(offset as usize);  // ‚Üê UB HERE!
```

Now replaced with

```
let offset = read_byte(source) as isize | -0x100; // negative
let src_addr = dest_local.sub((-offset) as usize);
```

This issue affectes newer Rust compilers; but existing prebuilt binaries in previous releases are to my awareness
unaffected.

## Version 2.0.0

This version carries the following improvements:

- Compressor 'Dictionary' will be reused (if possible) when compressing last block.
  * Improves performance by ~1.5% on 132KB files.

- Added Support for Custom Memory Allocators (Rust API Only)
  * This allows you to split up the short and long lived memory allocations.
  * Potentially useful if compressing in real time.

- Fixed regression where long sequences of repeated bytes compressed slower than they should.
  * This happened because zero extending bytes (`movzx`) was slower than reading a pure `u32` in x86.
  * Improves speed from 200MB to 400MB/s on a file of pure `00`s.

## Complete Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## Complete Changes

{{#each releases}}
  {{#if href}}
    ## [{{title}}]({{href}}){{#if tag}} - {{isoDate}}{{/if}}
  {{else}}
    ## {{title}}{{#if tag}} - {{isoDate}}{{/if}}
  {{/if}}

  {{#if summary}}
    {{summary}}
  {{/if}}

  {{#if merges}}
    ### Merged

    {{#each merges}}
      - {{#if commit.breaking}}**Breaking change:** {{/if}}{{message}} {{#if href}}[`#{{id}}`]({{href}}){{/if}}
    {{/each}}
  {{/if}}

  {{#if fixes}}
    ### Fixed

    {{#each fixes}}
      - {{#if commit.breaking}}**Breaking change:** {{/if}}{{commit.subject}}{{#each fixes}} {{#if href}}[`#{{id}}`]({{href}}){{/if}}{{/each}}
    {{/each}}
  {{/if}}

  {{#commit-list commits heading='### Commits'}}
    - {{#if breaking}}**Breaking change:** {{/if}}{{subject}} {{#if href}}[`{{shorthash}}`]({{href}}){{/if}}
  {{/commit-list}}

{{/each}}

====

{{#unless options.hideCredit}}
  Reloaded changelogs are generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog) üòá.
{{/unless}}